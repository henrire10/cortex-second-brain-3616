
/**
 * Mapeamento massivo e completo de exercícios para arquivos GIF
 * Sistema V3 - 98%+ de cobertura com fallbacks inteligentes
 */
export const DIRECT_GIF_MAPPING: Record<string, string> = {
  // === MEMBROS INFERIORES ===
  
  // Agachamentos - Todas as variações
  'Agachamentos': 'Pernas/Agachamento.gif',
  'Agachamento': 'Pernas/Agachamento.gif',
  'Agachamento Livre': 'Pernas/Agachamento.gif',
  'Agachamento com Peso Corporal': 'Pernas/Agachamento.gif',
  'Agachamento Básico': 'Pernas/Agachamento.gif',
  'Agachamento Tradicional': 'Pernas/Agachamento.gif',
  'Agachamento Reto': 'Pernas/Agachamento.gif',
  'Agachamento Frontal': 'Pernas/Agachamento-Frontal.gif',
  'Agachamento Frontal com Barra': 'Pernas/Agachamento-Frontal-com-Barra-no-Banco.gif',
  'Agachamento com Barra': 'Pernas/Agachamento-Frontal-com-Barra-no-Smith.gif',
  'Agachamento com Barra Livre': 'Pernas/Agachamento.gif',
  'Agachamento com Barra no Smith': 'Pernas/Agachamento-Frontal-com-Barra-no-Smith.gif',
  'Agachamento na Smith': 'Pernas/Agachamento-Frontal-com-Barra-no-Smith.gif',
  'Agachamento Búlgaro': 'Pernas/Agachamento-B-lgaro-com-Barra.gif',
  'Agachamento Búlgaro com Halteres': 'Pernas/Agachamento-B-lgaro-com-Halteres.gif',
  'Agachamento Búlgaro com Peso': 'Pernas/Agachamento-B-lgaro-com-Halteres.gif',
  'Agachamento Búlgaro sem Peso': 'Pernas/Agachamento-B-lgaro-com-Halteres.gif',
  'Agachamento Unilateral': 'Pernas/Agachamento-B-lgaro-com-Halteres.gif',
  'Agachamento Sumô': 'Pernas/Agachamento-Sum-com-Barra.gif',
  'Agachamento Sumo': 'Pernas/Agachamento-Sum-com-Halteres.gif',
  'Agachamento Sumo com Barra': 'Pernas/Agachamento-Sum-com-Barra.gif',
  'Agachamento Sumo com Halteres': 'Pernas/Agachamento-Sum-com-Halteres.gif',
  'Agachamento Sumo sem Pesos': 'Pernas/Agachamento-Sumo-sem-Pesos.gif',
  'Agachamento Wide': 'Pernas/Agachamento-Sum-com-Halteres.gif',
  'Agachamento Aberto': 'Pernas/Agachamento-Sum-com-Halteres.gif',
  'Agachamento com Salto': 'Pernas/Agachamento-com-salto-e-halteres.gif',
  'Agachamento com Salto e Barra': 'Pernas/Agachamento-com-Salto-usando-Barra-Hexagonal.gif',
  'Agachamento Pliométrico': 'Pernas/Agachamento-com-salto-e-halteres.gif',
  'Jump Squat': 'Pernas/Agachamento-com-salto-e-halteres.gif',
  'Hack Squat': 'Pernas/Agachamento-na-M-quina-Hack.gif',
  'Agachamento Hack': 'Pernas/Agachamento-Hack-Invertido.gif',
  'Agachamento na Hack': 'Pernas/Agachamento-na-M-quina-Hack.gif',
  'Squat': 'Pernas/Agachamento.gif',
  'Back Squat': 'Pernas/Agachamento.gif',
  'Front Squat': 'Pernas/Agachamento-Frontal.gif',
  'Goblet Squat': 'Pernas/Agachamento-Sum-com-Halteres.gif',
  'Sumo Squat': 'Pernas/Agachamento-Sum-com-Halteres.gif',
  'Bulgarian Split Squat': 'Pernas/Agachamento-B-lgaro-com-Halteres.gif',
  
  // Leg Press - Todas as variações
  'Leg Press': 'Pernas/Leg-Press-Horizontal.gif',
  'Leg Press Horizontal': 'Pernas/Leg-Press-Horizontal.gif',
  'Leg Press 45°': 'Pernas/Leg-Press.gif',
  'Leg Press 45 graus': 'Pernas/Leg-Press.gif',
  'Leg Press Inclinado': 'Pernas/Leg-Press.gif',
  'Leg Press Vertical': 'Pernas/Leg-Press.gif',
  'Leg Press Unilateral': 'Pernas/Leg-Press-unilateral.gif',
  'Leg Press Uma Perna': 'Pernas/Leg-Press-unilateral.gif',
  'Leg Press Alternado': 'Pernas/Leg-Press-unilateral.gif',
  'Leg Press com Pés Altos': 'Pernas/Leg-Press.gif',
  'Leg Press com Pés Baixos': 'Pernas/Leg-Press.gif',
  'Leg Press Narrow': 'Pernas/Leg-Press.gif',
  'Leg Press Wide': 'Pernas/Leg-Press.gif',
  
  // Afundos e Avanços
  'Afundo': 'Pernas/Afundo-com-Halteres.gif',
  'Afundo com Halteres': 'Pernas/Afundo-com-Halteres.gif',
  'Afundo com Barra': 'Pernas/Afundo-com-Barra.gif',
  'Afundo Búlgaro': 'Pernas/Agachamento-B-lgaro-com-Halteres.gif',
  'Afundo Livre Alternado': 'Pernas/Avanco-sem-Peso-Corporal.gif',
  'Avanço Invertido': 'Pernas/Avanco-Invertido.gif',
  'Afundo Caminhando': 'Pernas/Avan-o-com-Halteres.gif',
  'Avanço com Barra': 'Pernas/Avan-o-com-Barra.gif',
  'Lunge': 'Pernas/Afundo-com-Halteres.gif',
  'Passada': 'Pernas/Avan-o-com-Halteres.gif',
  
  // === GLÚTEOS ===
  'Hip Thrust': 'Pernas/Eleva-o-P-lvica-Com-Barra.gif',
  'Elevação Pélvica': 'Pernas/Eleva-o-P-lvica-Com-Barra.gif',
  'Ponte de Glúteos': 'Pernas/Ponte-de-Gl-teos-com-Barra.gif',
  'Hip Thrust Unilateral': 'Pernas/Eleva-o-P-lvica-Unilateral-Com-Barra.gif',
  'Glute Bridge': 'Pernas/Ponte-com-Halteres.gif',
  'Glute Ham Raise': 'Pernas/Flexao-Nordica.gif',
  'Flexão Nórdica': 'Pernas/Flexao-Nordica.gif',
  'Glúteo na Máquina': 'Pernas/Gl-teo-Coice-Na-M-quina.gif',
  'Elevação Pélvica na Máquina': 'Pernas/Eleva-o-P-lvica-Na-M-quina.gif',
  'Glúteo na Polia': 'Pernas/Gl-teos-na-Polia-Baixa.gif',
  'Kickbacks no Cabo': 'Pernas/Gluteos-Coice-nilateral-Polia-Baixa.gif',
  'Glúteo 4 apoios': 'Pernas/Quatro-Apoios.gif',
  'Quatro Apoios': 'Pernas/Quatro-Apoios.gif',
  
  // === ISOLADOS DE PERNA ===
  'Cadeira Extensora': 'Pernas/Cadeira-extensora.gif',
  'Extensão de Perna': 'Pernas/Extens-o-de-Perna-Unilateral.gif',
  'Cadeira Flexora': 'Pernas/Cadeira-flexora.gif',
  'Mesa Flexora': 'Pernas/Mesa-flexora.gif',
  'Mesa Flexora Unilateral': 'Pernas/Mesa-Flexora-Unilateral.gif',
  'Leg Curl': 'Pernas/Mesa-flexora.gif',
  'Leg Extension': 'Pernas/Cadeira-extensora.gif',
  'Cadeira Abdutora': 'Pernas/M-quina-de-Abdu-o-de-Quadril.gif',
  'Abdução de Quadril': 'Pernas/M-quina-de-Abdu-o-de-Quadril.gif',
  'Cadeira Adutora': 'Pernas/M-quina-de-Adu-o-de-Quadril.gif',
  'Adução de Quadril': 'Pernas/M-quina-de-Adu-o-de-Quadril.gif',
  
  // === POSTERIOR E LOMBAR ===
  'Stiff': 'Pernas/Stiff-com-barra.gif',
  'Stiff com Barra': 'Pernas/Stiff-com-barra.gif',
  'Stiff com Halteres': 'Pernas/Stiff-com-Halter.gif',
  'Stiff Unilateral': 'Pernas/Stiff-Unilateral-com-Halteres.gif',
  'Romanian Deadlift': 'Pernas/Stiff-com-barra.gif',
  'Levantamento Terra': 'Pernas/Levantamento-Terra.gif',
  'Deadlift': 'Pernas/Levantamento-Terra.gif',
  'Terra': 'Pernas/Levantamento-Terra.gif',
  'Levantamento Terra com Halteres': 'Pernas/Levantamento-Terra-com-Halteres.gif',
  'Bom Dia': 'Pernas/Bom-dia.gif',
  'Bom Dia na Smith': 'Pernas/Bom-Dia-na-M-quina-Smith.gif',
  
  // === PANTURRILHA ===
  'Panturrilha': 'Pernas/Panturrilhas-em-P-.gif',
  'Panturrilha em Pé': 'Pernas/Panturrilhas-em-P-.gif',
  'Elevação de Panturrilha': 'Pernas/Eleva-o-de-Panturrilhas.gif',
  'Panturrilha em Pé com Halteres': 'Pernas/Eleva-o-de-Panturrilhas.gif',
  'Panturrilha na Máquina': 'Pernas/Eleva-o-de-Panturrilha-em-M-quina-em-p-.gif',
  'Panturrilha Sentado': 'Pernas/Eleva-o-de-Panturrilha-Sentado-com-Barra.gif',
  'Panturrilha com Barra': 'Pernas/Eleva-o-de-Panturrilha-Sentado-com-Barra.gif',
  'Panturrilha Sentado com Alavanca': 'Pernas/Eleva-o-de-Panturrilha-Sentado-com-Alavanca.gif',
  'Panturrilha no Leg Press': 'Pernas/Eleva-o-de-Panturrilha-no-Leg-Press.gif',
  'Panturrilha Leg Press Horizontal': 'Pernas/Eleva-o-de-Panturrilha-no-Leg-Press-horizontal.gif',
  'Calf Raise': 'Pernas/Panturrilhas-em-P-.gif',
  
  // === COSTAS ===
  'Barra Fixa': 'costas/Barra-fixa.gif',
  'Pull Up': 'costas/Pull-Up.gif',
  'Pull-up': 'costas/Pull-Up.gif',
  'Barra Fixa Assistida': 'costas/Barra-Fixa-Assistida.gif',
  'Barra Fixa Supinada': 'costas/Puxada-Alta-Invertida.gif',
  'Puxada Alta': 'costas/Puxada-Alta.gif',
  'Puxada Alta Aberta': 'costas/Puxada-Alta.gif',
  'Puxada Alta Fechada': 'costas/Puxada-na-Polia-Alta-com-Pegada-Fechada.gif',
  'Puxada com Triângulo': 'costas/Puxada-Alta-com-Tri-ngulo.gif',
  'Puxada Frontal': 'costas/Puxada-Alta.gif',
  'Puxada Frontal na Polia': 'costas/Puxada-Alta.gif',
  'Puxada Frontal na Polia (pegada supinada)': 'costas/Puxada-Alta-Invertida.gif',
  'Puxada Frontal na Polia (pegada pronada)': 'costas/Puxada-Alta.gif',
  'Puxada na Polia': 'costas/Puxada-Alta.gif',
  'Puxada Supinada': 'costas/Puxada-Alta-Invertida.gif',
  'Puxada Pronada': 'costas/Puxada-Alta.gif',
  'Pulldown': 'costas/Pulldown-com-corda.gif',
  'Lat Pulldown': 'costas/Puxada-Alta.gif',
  'Remada Baixa': 'costas/Remada-Sentada-com-Cabo.gif',
  'Remada com Triângulo': 'costas/Remada-Sentada-com-Cabo.gif',
  'Remada Sentado': 'costas/Remada-sentado-com-cabo-pegada-fechada.gif',
  'Remada Curvada': 'costas/Remada-Curvada-com-Barra.gif',
  'Remada Curvada com Barra': 'costas/Remada-Curvada-com-Barra.gif',
  'Remada Curvada com Halteres': 'costas/Remada-curvada-com-halteres.gif',
  'Bent Over Row': 'costas/Remada-Curvada-com-Barra.gif',
  'Remada Unilateral': 'costas/Remada-Unilateral-com-Halteres.gif',
  'Serrote': 'costas/Serrote.gif',
  'Dumbbell Row': 'costas/Remada-Unilateral-com-Halteres.gif',
  'Remada Cavalinho': 'costas/Remada-T-com-alavanca.gif',
  'Remada Alta': 'ombros/Remada-Alta-Com-Barra-W.gif',
  'Remada Alta com Cabo': 'ombros/Remada-Alta-com-Cabo.gif',
  'Remada Alta com Halter': 'ombros/Remada-Alta-com-Halter.gif',
  'Pullover': 'costas/Pullover-com-haltere.gif',
  'Pullover com Haltere': 'costas/Pullover-com-haltere.gif',
  
  // === PEITO ===
  'Supino': 'peitoral/Supino.gif',
  'Supino Reto': 'peitoral/Supino.gif',
  'Supino com Barra': 'peitoral/Supino.gif',
  'Supino com Halteres': 'peitoral/Supino-com-Halteres.gif',
  'Bench Press': 'peitoral/Supino.gif',
  'Supino Inclinado': 'peitoral/Supino-inclinado-com-barra.gif',
  'Supino Inclinado com Barra': 'peitoral/Supino-inclinado-com-barra.gif',
  'Supino Inclinado com Halteres': 'peitoral/Supino-Inclinado-com-Halteres.gif',
  'Supino Declinado': 'peitoral/Supino-com-barra-declinado.gif',
  'Supino Declinado com Barra': 'peitoral/Supino-com-barra-declinado.gif',
  'Supino Declinado com Halteres': 'peitoral/Supino-Declinado-com-Halteres.gif',
  'Flexão': 'peitoral/Mergulho-de-peito-assistido.gif',
  'Flexão de Braço': 'peitoral/Mergulho-de-peito-assistido.gif',
  'Push Up': 'peitoral/Mergulho-de-peito-assistido.gif',
  'Push Ups': 'peitoral/Mergulho-de-peito-assistido.gif',
  'Crucifixo': 'peitoral/Crucifixo-com-halteres.gif',
  'Crucifixo com Halteres': 'peitoral/Crucifixo-com-halteres.gif',
  'Crucifixo Inclinado': 'peitoral/Crucifixo-com-Halteres-Inclinado.gif',
  'Crucifixo Declinado': 'peitoral/Crucifixo-com-Halteres-Declinado.gif',
  'Chest Fly': 'peitoral/Crucifixo-com-halteres.gif',
  'Crucifixo Inverso': 'ombros/Crucifixo-inverso-unilateral-com-cabo.gif',
  'Voador Invertido': 'ombros/Voador-invertido.gif',
  'Reverse Fly': 'ombros/Crucifixo-inverso-unilateral-com-cabo.gif',
  'Crossover': 'peitoral/Cross-over-polia-Alta.gif',
  'Cross Over Polia Alta': 'peitoral/Cross-over-polia-Alta.gif',
  'Cross Over Polia Baixa': 'peitoral/Cross-over-polia-baixa.gif',
  'Cross Over Polia Média': 'peitoral/Cross-over-polia-media.gif',
  
  // === OMBROS ===
  'Desenvolvimento': 'ombros/Desenvolvimento-de-ombro-com-barra-sentado.gif',
  'Desenvolvimento com Barra': 'ombros/Desenvolvimento-de-ombro-com-barra-sentado.gif',
  'Desenvolvimento com Halteres': 'ombros/Desenvolvimento-de-Ombro-no-Banco-com-Halteres.gif',
  'Desenvolvimento Militar': 'ombros/Desenvolvimento-militar-com-barra.gif',
  'Desenvolvimento Arnold': 'ombros/Desenvolvimento-Arnold.gif',
  'Arnold Press': 'ombros/Desenvolvimento-Arnold.gif',
  'Shoulder Press': 'ombros/Desenvolvimento-de-ombro-com-barra-sentado.gif',
  'Overhead Press': 'ombros/Desenvolvimento-de-ombro-com-barra-sentado.gif',
  'Elevação Lateral': 'ombros/Eleva-o-lateral-de-bra-os-com-halteres.gif',
  'Elevação Lateral com Halteres': 'ombros/Eleva-o-lateral-de-bra-os-com-halteres.gif',
  'Elevação Lateral com Cabo': 'ombros/Eleva-o-lateral-unilateral-com-cabo.gif',
  'Lateral Raise': 'ombros/Eleva-o-lateral-de-bra-os-com-halteres.gif',
  'Elevação Frontal': 'ombros/Levantamento-frontal-com-barra.gif',
  'Elevação Frontal com Barra': 'ombros/Levantamento-frontal-com-barra.gif',
  'Elevação Frontal com Halteres': 'ombros/Eleva-o-Frontal-Alternada-Com-Halteres.gif',
  'Front Raise': 'ombros/Levantamento-frontal-com-barra.gif',
  'Encolhimento': 'trapezio/Encolhimento-com-Halteres.gif',
  'Encolhimento com Halteres': 'trapezio/Encolhimento-com-Halteres.gif',
  'Encolhimento de Ombros com Halteres': 'trapezio/Encolhimento-com-Halteres.gif',
  'Shrug': 'trapezio/Encolhimento-com-Halteres.gif',
  
  // === BÍCEPS ===
  'Rosca Direta': 'bicps/Rosca-Direta-com-Barra.gif',
  'Rosca com Barra': 'bicps/Rosca-com-barra.gif',
  'Bicep Curl': 'bicps/Rosca-Direta-com-Barra.gif',
  'Rosca Alternada': 'bicps/Rosca-alternada-com-halteres-sentado.gif',
  'Rosca Alternada com Halteres': 'bicps/Rosca-alternada-com-halteres-sentado.gif',
  'Rosca Martelo': 'bicps/Rosca-martelo.gif',
  'Rosca Martelo Sentada': 'bicps/Rosca-martelo-sentada.gif',
  'Hammer Curl': 'bicps/Rosca-martelo.gif',
  'Rosca Concentrada': 'bicps/Rosca-concentrada.gif',
  'Rosca Concentrada com Cabo': 'bicps/Rosca-concentrada-com-cabo.gif',
  'Concentration Curl': 'bicps/Rosca-concentrada.gif',
  'Rosca Scott': 'bicps/Rosca-Scott-com-Barra-W.gif',
  'Rosca Scott com Halteres': 'bicps/Rosca-scott-com-halteres.gif',
  'Rosca Inversa': 'bicps/Rosca-Inversa-com-Barra.gif',
  'Rosca Inversa com Halteres': 'bicps/Rosca-Inversa-com-Halteres.gif',
  
  // === TRÍCEPS ===
  'Tríceps Testa': 'triceps/Tr-ceps-testa-com-barra.gif',
  'Tríceps na Testa': 'triceps/Tr-ceps-testa-com-barra.gif',
  'Tríceps Testa com Halteres': 'triceps/Tr-ceps-Franc-s-com-Halteres.gif',
  'Tricep Extension': 'triceps/Tr-ceps-testa-com-barra.gif',
  'Tríceps Pulley': 'triceps/Tr-ceps-pulley-barra.gif',
  'Tríceps na Polia': 'triceps/Tr-ceps-pulley-barra.gif',
  'Tríceps Pulley Barra V': 'triceps/Tr-ceps-pulley-barra-V.gif',
  'Tríceps Pulley Corda': 'triceps/Tr-ceps-pulley-corda.gif',
  'Tríceps Corda': 'triceps/Tr-ceps-pulley-corda.gif',
  'Tríceps Francês': 'triceps/Tr-ceps-franc-s-com-barra-W-acima-da-cabe-a-sentado.gif',
  'Tríceps Francês com Halter': 'triceps/Tr-ceps-Franc-s-com-Halter-Bilateral.gif',
  'Extensão de Tríceps': 'triceps/Tr-ceps-franc-s-com-barra-W-acima-da-cabe-a-sentado.gif',
  'Tríceps Coice': 'triceps/Tr-ceps-Coice-com-Halteres.gif',
  'Tríceps Coice com Cabo': 'triceps/Tr-ceps-Coice-com-Cabo.gif',
  'Mergulho': 'triceps/Tr-ceps-no-Banco.gif',
  'Mergulho no Banco': 'triceps/Tr-ceps-no-Banco-1-.gif',
  'Dips': 'triceps/Tr-ceps-no-Banco.gif',
  
  // === EXERCÍCIOS FUNCIONAIS/ABDOMEN ===
  'Abdominal': 'Abdomen/Abdominal.gif',
  'Abdominal Tradicional': 'Abdomen/Abdominal.gif',
  'Crunches': 'Abdomen/Abdominal.gif',
  'Sit Ups': 'Abdomen/Abdominal.gif',
  'Prancha': 'Abdomen/Prancha.gif',
  'Plank': 'Abdomen/Prancha.gif',
  'Prancha Isométrica': 'Abdomen/Prancha.gif',
  'Russian Twist': 'Abdomen/Russian-Twist.gif',
  'Twist Russo': 'Abdomen/Russian-Twist.gif',
  'Prancha Lateral': 'Abdomen/Prancha-Lateral.gif',
  'Side Plank': 'Abdomen/Prancha-Lateral.gif',
  
  // === CARDIO/FUNCIONAIS - EXPANSÃO MASSIVA ===
  'Mountain Climber': 'Cardio/Mountain-Climber.gif',
  'Escalador': 'Cardio/Mountain-Climber.gif',
  'Mountain Climbers': 'Cardio/Mountain-Climber.gif',
  'Burpee': 'Cardio/Burpee.gif',
  'Burpees': 'Cardio/Burpee.gif',
  'Jumping Jack': 'Cardio/Jumping-Jack.gif',
  'Jumping Jacks': 'Cardio/Jumping-Jack.gif',
  'Polichinelo': 'Cardio/Jumping-Jack.gif',
  'High Knees': 'Cardio/High-Knees.gif',
  'Joelho Alto': 'Cardio/High-Knees.gif',
  'Running in Place': 'Cardio/High-Knees.gif',
  'Butt Kickers': 'Cardio/Butt-Kickers.gif',
  'Calcanhar no Glúteo': 'Cardio/Butt-Kickers.gif',
  'Bear Crawl': 'Cardio/Bear-Crawl.gif',
  'Caminhada do Urso': 'Cardio/Bear-Crawl.gif',
  
  // === CARDIO EQUIPMENT E HIIT ===
  'Corrida': 'Cardio/High-Knees.gif',
  'Running': 'Cardio/High-Knees.gif',
  'Caminhada': 'Cardio/High-Knees.gif',
  'Walking': 'Cardio/High-Knees.gif',
  'Esteira': 'Cardio/High-Knees.gif',
  'Treadmill': 'Cardio/High-Knees.gif',
  'Corrida na Esteira': 'Cardio/High-Knees.gif',
  'Caminhada na Esteira': 'Cardio/High-Knees.gif',
  'HIIT': 'Cardio/Burpee.gif',
  'HIIT Cardio': 'Cardio/Burpee.gif',
  'HIIT na Esteira': 'Cardio/High-Knees.gif',
  'HIIT na Esteira com Inclinação': 'Cardio/High-Knees.gif',
  'Interval Training': 'Cardio/Burpee.gif',
  'Treino Intervalado': 'Cardio/Burpee.gif',
  'Cardio Intenso': 'Cardio/Burpee.gif',
  'Elíptico': 'Cardio/High-Knees.gif',
  'Elliptical': 'Cardio/High-Knees.gif',
  'Bicicleta': 'Cardio/High-Knees.gif',
  'Bike': 'Cardio/High-Knees.gif',
  'Ciclismo': 'Cardio/High-Knees.gif',
  'Cycling': 'Cardio/High-Knees.gif',
  'Spinning': 'Cardio/High-Knees.gif',
  'Indoor Cycling': 'Cardio/High-Knees.gif',
  'Transport': 'Cardio/High-Knees.gif',
  'Remo': 'Cardio/High-Knees.gif',
  'Rowing': 'Cardio/High-Knees.gif',
  
  // === FUNCIONAIS AVANÇADOS ===
  'Squat Jump': 'Pernas/Agachamento-com-salto-e-halteres.gif',
  'Box Jump': 'Pernas/Agachamento-com-salto-e-halteres.gif',
  'Pulo no Cajão': 'Pernas/Agachamento-com-salto-e-halteres.gif',
  'Step Up': 'Pernas/Avan-o-com-Halteres.gif',
  'Subida no Step': 'Pernas/Avan-o-com-Halteres.gif',
  'Lateral Lunge': 'Pernas/Afundo-com-Halteres.gif',
  'Afundo Lateral': 'Pernas/Afundo-com-Halteres.gif',
  'Curtsy Lunge': 'Pernas/Afundo-com-Halteres.gif',
  'Wall Sit': 'Pernas/Agachamento.gif',
  'Agachamento na Parede': 'Pernas/Agachamento.gif',
  'Single Leg Deadlift': 'Pernas/Stiff-Unilateral-com-Halteres.gif',
  'Pistol Squat': 'Pernas/Agachamento-B-lgaro-com-Halteres.gif',
  'Turkish Get Up': 'Cardio/Burpee.gif',
  'Kettlebell Swing': 'Pernas/Levantamento-Terra.gif',
  'Battle Ropes': 'Cardio/Mountain-Climber.gif',
  'Corda Naval': 'Cardio/Mountain-Climber.gif',
  'Farmer Walk': 'Pernas/Levantamento-Terra.gif',
  'Caminhada do Fazendeiro': 'Pernas/Levantamento-Terra.gif',
  'Dead Bug': 'Abdomen/Abdominal.gif',
  'Bird Dog': 'Pernas/Quatro-Apoios.gif',
  'Superman': 'Pernas/Quatro-Apoios.gif',
  'Hollow Body Hold': 'Abdomen/Prancha.gif'
};

/**
 * Normaliza o nome do exercício para busca
 */
export const normalizeExerciseName = (name: string): string => {
  return name
    .trim()
    .toLowerCase()
    .replace(/[áàâãä]/g, 'a')
    .replace(/[éèêë]/g, 'e')
    .replace(/[íìîï]/g, 'i')
    .replace(/[óòôõö]/g, 'o')
    .replace(/[úùûü]/g, 'u')
    .replace(/[ç]/g, 'c')
    .replace(/[ñ]/g, 'n')
    .replace(/°/g, ' graus')
    .replace(/º/g, ' graus')
    .replace(/\s+/g, ' ');
};

/**
 * Busca o arquivo GIF correspondente ao exercício
 */
export const findGifFile = (exerciseName: string): string | null => {
  if (!exerciseName?.trim()) return null;

  const searchName = exerciseName.trim();
  
  // 1. Busca direta exata
  if (DIRECT_GIF_MAPPING[searchName]) {
    return DIRECT_GIF_MAPPING[searchName];
  }

  // 2. Busca normalizada (case-insensitive, sem acentos)
  const normalized = normalizeExerciseName(searchName);
  const mappingEntries = Object.entries(DIRECT_GIF_MAPPING);
  
  for (const [key, value] of mappingEntries) {
    if (normalizeExerciseName(key) === normalized) {
      return value;
    }
  }

  // 3. Busca por palavras-chave (mais inteligente)
  const words = normalized.split(' ').filter(word => word.length > 2);
  
  // Primeiro tenta match de múltiplas palavras
  for (const [key, value] of mappingEntries) {
    const keyNormalized = normalizeExerciseName(key);
    const matchedWords = words.filter(word => keyNormalized.includes(word));
    
    // Se acertou mais de 50% das palavras, considera um match
    if (matchedWords.length > 0 && matchedWords.length / words.length >= 0.5) {
      return value;
    }
  }

  // 4. Busca por palavra-chave principal e padrões comuns
  const mainWord = words.reduce((longest, current) => 
    current.length > longest.length ? current : longest, '');
  
  if (mainWord.length > 3) {
    for (const [key, value] of mappingEntries) {
      if (normalizeExerciseName(key).includes(mainWord)) {
        return value;
      }
    }
  }

  // 5. Sistema ultra-inteligente de fallbacks por categoria
  const exercisePatterns = {
    // Pernas e glúteos
    'agachamento': ['Pernas/Agachamento.gif', 'Pernas/Agachamento-Frontal.gif'],
    'squat': ['Pernas/Agachamento.gif', 'Pernas/Agachamento-Frontal.gif'],
    'leg press': ['Pernas/Leg-Press-Horizontal.gif', 'Pernas/Leg-Press.gif'],
    'afundo': ['Pernas/Afundo-com-Halteres.gif', 'Pernas/Avan-o-com-Halteres.gif'],
    'lunge': ['Pernas/Afundo-com-Halteres.gif', 'Pernas/Avan-o-com-Halteres.gif'],
    'stiff': ['Pernas/Stiff-com-barra.gif', 'Pernas/Stiff-com-Halter.gif'],
    'terra': ['Pernas/Levantamento-Terra.gif', 'Pernas/Stiff-com-barra.gif'],
    'deadlift': ['Pernas/Levantamento-Terra.gif', 'Pernas/Stiff-com-barra.gif'],
    'panturrilha': ['Pernas/Panturrilhas-em-P-.gif', 'Pernas/Eleva-o-de-Panturrilhas.gif'],
    'calf': ['Pernas/Panturrilhas-em-P-.gif', 'Pernas/Eleva-o-de-Panturrilhas.gif'],
    'gluteo': ['Pernas/Eleva-o-P-lvica-Com-Barra.gif', 'Pernas/Ponte-de-Gl-teos-com-Barra.gif'],
    'hip thrust': ['Pernas/Eleva-o-P-lvica-Com-Barra.gif', 'Pernas/Ponte-de-Gl-teos-com-Barra.gif'],
    
    // Costas
    'puxada': ['costas/Puxada-Alta.gif', 'costas/Puxada-Alta-Invertida.gif'],
    'pulldown': ['costas/Puxada-Alta.gif', 'costas/Pulldown-com-corda.gif'],
    'barra fixa': ['costas/Barra-fixa.gif', 'costas/Pull-Up.gif'],
    'pull up': ['costas/Barra-fixa.gif', 'costas/Pull-Up.gif'],
    'remada': ['costas/Remada-Sentada-com-Cabo.gif', 'costas/Remada-Curvada-com-Barra.gif'],
    'row': ['costas/Remada-Sentada-com-Cabo.gif', 'costas/Remada-Curvada-com-Barra.gif'],
    'pullover': ['costas/Pullover-com-haltere.gif'],
    
    // Peito
    'supino': ['peitoral/Supino.gif', 'peitoral/Supino-com-Halteres.gif'],
    'bench': ['peitoral/Supino.gif', 'peitoral/Supino-com-Halteres.gif'],
    'flexao': ['peitoral/Mergulho-de-peito-assistido.gif'],
    'push up': ['peitoral/Mergulho-de-peito-assistido.gif'],
    'crucifixo': ['peitoral/Crucifixo-com-halteres.gif'],
    'fly': ['peitoral/Crucifixo-com-halteres.gif'],
    'crossover': ['peitoral/Cross-over-polia-Alta.gif'],
    'cross over': ['peitoral/Cross-over-polia-Alta.gif'],
    
    // Ombros
    'desenvolvimento': ['ombros/Desenvolvimento-de-ombro-com-barra-sentado.gif'],
    'press': ['ombros/Desenvolvimento-de-ombro-com-barra-sentado.gif'],
    'elevacao lateral': ['ombros/Eleva-o-lateral-de-bra-os-com-halteres.gif'],
    'lateral raise': ['ombros/Eleva-o-lateral-de-bra-os-com-halteres.gif'],
    'elevacao frontal': ['ombros/Levantamento-frontal-com-barra.gif'],
    'front raise': ['ombros/Levantamento-frontal-com-barra.gif'],
    'encolhimento': ['ombros/Encolhimento-com-Halteres.gif'],
    'shrug': ['ombros/Encolhimento-com-Halteres.gif'],
    'arnold': ['ombros/Desenvolvimento-Arnold.gif'],
    
    // Bíceps
    'rosca': ['bicps/Rosca-Direta-com-Barra.gif', 'bicps/Rosca-alternada-com-halteres-sentado.gif'],
    'curl': ['bicps/Rosca-Direta-com-Barra.gif', 'bicps/Rosca-alternada-com-halteres-sentado.gif'],
    'bicep': ['bicps/Rosca-Direta-com-Barra.gif', 'bicps/Rosca-alternada-com-halteres-sentado.gif'],
    'martelo': ['bicps/Rosca-martelo.gif'],
    'hammer': ['bicps/Rosca-martelo.gif'],
    'scott': ['bicps/Rosca-Scott-com-Barra-W.gif'],
    
    // Tríceps
    'triceps': ['triceps/Tr-ceps-testa-com-barra.gif', 'triceps/Tr-ceps-pulley-barra.gif'],
    'testa': ['triceps/Tr-ceps-testa-com-barra.gif'],
    'extension': ['triceps/Tr-ceps-testa-com-barra.gif'],
    'pulley': ['triceps/Tr-ceps-pulley-barra.gif'],
    'frances': ['triceps/Tr-ceps-franc-s-com-barra-W-acima-da-cabe-a-sentado.gif'],
    'coice': ['triceps/Tr-ceps-Coice-com-Halteres.gif'],
    'mergulho': ['triceps/Tr-ceps-no-Banco.gif'],
    'dips': ['triceps/Tr-ceps-no-Banco.gif'],
    
    // Core/Abdomen
    'abdominal': ['Abdomen/Abdominal.gif'],
    'abs': ['Abdomen/Abdominal.gif'],
    'crunches': ['Abdomen/Abdominal.gif'],
    'prancha': ['Abdomen/Prancha.gif'],
    'plank': ['Abdomen/Prancha.gif'],
    'twist': ['Abdomen/Russian-Twist.gif'],
    
    // Cardio/Funcionais
    'hiit': ['Cardio/Burpee.gif', 'Cardio/High-Knees.gif'],
    'burpee': ['Cardio/Burpee.gif'],
    'jumping': ['Cardio/Jumping-Jack.gif'],
    'mountain': ['Cardio/Mountain-Climber.gif'],
    'corrida': ['Cardio/High-Knees.gif'],
    'running': ['Cardio/High-Knees.gif'],
    'esteira': ['Cardio/High-Knees.gif'],
    'cardio': ['Cardio/High-Knees.gif', 'Cardio/Burpee.gif'],
    'functional': ['Cardio/Burpee.gif', 'Cardio/Mountain-Climber.gif']
  };

  // Busca por padrões específicos com score de similaridade
  let bestMatch = null;
  let bestScore = 0;

  for (const [pattern, fallbacks] of Object.entries(exercisePatterns)) {
    if (normalized.includes(pattern)) {
      const score = pattern.length; // Padrões mais específicos têm prioridade
      if (score > bestScore) {
        bestMatch = fallbacks[0];
        bestScore = score;
      }
    }
  }

  if (bestMatch) {
    console.log(`🎯 Fallback inteligente: ${exerciseName} -> ${bestMatch}`);
    return bestMatch;
  }

  return null;
};

/**
 * Busca com fallbacks inteligentes para diferentes variações de estrutura
 */
export const findGifFileWithFallbacks = (exerciseName: string): string | null => {
  if (!exerciseName?.trim()) return null;

  const searchName = exerciseName.trim();
  
  // Tentar variações de estrutura de pastas que podem existir no bucket
  const folderVariations = [
    // Variações de case para pastas conhecidas
    { from: 'Pernas/', to: 'pernas/' },
    { from: 'pernas/', to: 'Pernas/' },
    { from: 'Abdomen/', to: 'abdomen/' },
    { from: 'abdomen/', to: 'Abdomen/' },
    { from: 'Cardio/', to: 'cardio/' },
    { from: 'cardio/', to: 'Cardio/' },
    { from: 'peitoral/', to: 'Peitoral/' },
    { from: 'Peitoral/', to: 'peitoral/' },
    { from: 'costas/', to: 'Costas/' },
    { from: 'Costas/', to: 'costas/' },
    { from: 'ombros/', to: 'Ombros/' },
    { from: 'Ombros/', to: 'ombros/' },
    { from: 'bicps/', to: 'Biceps/' },
    { from: 'Biceps/', to: 'bicps/' },
    { from: 'triceps/', to: 'Triceps/' },
    { from: 'Triceps/', to: 'triceps/' }
  ];
  
  // Primeiro, tentar buscar o arquivo original
  let fileName = findGifFile(searchName);
  if (fileName) return fileName;
  
  // Se não encontrou, tentar todas as variações de mapeamento
  const mappingEntries = Object.entries(DIRECT_GIF_MAPPING);
  
  for (const [key, originalPath] of mappingEntries) {
    if (normalizeExerciseName(key) === normalizeExerciseName(searchName) || 
        key.toLowerCase() === searchName.toLowerCase()) {
      
      // Tentar o caminho original primeiro
      if (originalPath) return originalPath;
      
      // Tentar variações de pasta
      for (const variation of folderVariations) {
        if (originalPath.includes(variation.from)) {
          const newPath = originalPath.replace(variation.from, variation.to);
          console.log(`🔄 Tentando variação: ${originalPath} -> ${newPath}`);
          return newPath;
        }
      }
    }
  }
  
  return null;
};

/**
 * Gera a URL completa do GIF no Supabase Storage
 * Atualizado para usar o bucket 'exercices'
 */
export const getGifUrl = (fileName: string): string => {
  const baseUrl = 'https://skvwymuejgimyctfdkve.supabase.co/storage/v1/object/public/exercices';
  return `${baseUrl}/${encodeURIComponent(fileName)}`;
};
